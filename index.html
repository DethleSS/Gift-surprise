<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

<title>üéÅ –ü–æ—Å–ª–µ–¥–Ω—è—è –∫–æ—Ä–æ–±–∫–∞</title>

<style>
body {
  margin: 0;
  background: #0b0b0b;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  overflow: hidden;
  color: white;
}

/* ---------- –°–¢–ê–†–¢ ---------- */
#startScreen {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(circle at center, #1a1a1a, #000);
}

#startBtn {
  width: 85%;
  height: 28dvh;
  font-size: 30px;
  font-weight: 700;
  border-radius: 30px;
  border: none;
  background: linear-gradient(135deg,#ffffff,#e8e8e8);
  color: black;
  box-shadow:
    0 15px 40px rgba(0,0,0,.6),
    inset 0 2px 4px rgba(255,255,255,.6);
  transition: .25s;
}
#startBtn:active { transform: scale(.96); }

/* ---------- –í–ò–î–ï–û ---------- */
video {
  display: none;
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100dvh;
  object-fit: contain;
  background: black;
}

/* ---------- –ó–ê–¢–ï–ú–ù–ï–ù–ò–ï ---------- */
#overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(10px);
  opacity: 0;
  transition: opacity .5s;
  z-index: 5;
}

/* ---------- POPUP ---------- */
.popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(.85);
  width: 90%;
  max-width: 420px;
  padding: 30px;
  background: white;
  color: black;
  border-radius: 28px;
  text-align: center;
  box-shadow: 0 30px 80px rgba(0,0,0,.7);
  opacity: 0;
  transition: .35s;
  z-index: 10;
}

.popup.show {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

.math {
  font-size: 20px;
  margin: 18px 0 22px;
}

.answers {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.answers button {
  padding: 12px;
  font-size: 18px;
  border-radius: 12px;
  border: none;
  background: #eee;
}

.finalText {
  font-size: 24px;
  font-weight: 700;
}

/* ---------- CONFETTI CANVAS ---------- */
#confetti {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 20;
}
</style>
</head>

<body>

<div id="startScreen">
  <button id="startBtn">
    üéÅ –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –∫–æ—Ä–æ–±–∫—É
  </button>
</div>

<video id="vid" playsinline>
  <source src="./video.mp4" type="video/mp4">
</video>

<div id="overlay"></div>

<canvas id="confetti"></canvas>

<!-- –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ -->
<div id="mathPopup" class="popup">
  <h2>–ü–æ–¥–æ–∂–¥–∏‚Ä¶</h2>
  <p style="opacity:.7">–†–µ—à–∏ –ø—Ä–∏–º–µ—Ä —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</p>

  <div class="math">
    log‚ÇÇ(256) √ó ‚àö144 + 7¬≥ ‚àí (15 √∑ 3) =
  </div>

  <div class="answers">
    <button>42</button><button>128</button>
    <button>731</button><button>96</button>
    <button>512</button><button>37</button>
    <button>404</button><button>81</button>
    <button>999</button><button>???</button>
  </div>
</div>

<!-- –ü–†–û–ú–ï–ñ–£–¢–û–ß–ù–´–ô -->
<div id="midPopup" class="popup">
  <div class="finalText">
    –õ–∞–¥–Ω–æ‚Ä¶ üòÖ<br><br>
    –ù–µ –±—É–¥—É –≥—Ä—É–∑–∏—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–æ–π
  </div>
</div>

<!-- –§–ò–ù–ê–õ -->
<div id="finalPopup" class="popup">
  <div class="finalText">
    –¢—ã —Ç–æ—á–Ω–æ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ–ª–∞<br>
    <b>–í–°–ï –∫–æ—Ä–æ–±–∫–∏?</b> üéÅ
  </div>
</div>

<script>
const btn = document.getElementById('startBtn')
const startScreen = document.getElementById('startScreen')
const vid = document.getElementById('vid')
const overlay = document.getElementById('overlay')

const mathPopup = document.getElementById('mathPopup')
const midPopup = document.getElementById('midPopup')
const finalPopup = document.getElementById('finalPopup')

/* ---------- helpers ---------- */
function show(el){
  el.style.display='block'
  requestAnimationFrame(()=>el.classList.add('show'))
}

function hide(el){
  el.classList.remove('show')
  setTimeout(()=>el.style.display='none',300)
}

/* =========================
   ‚ù§Ô∏èüéÅ EMOJI CONFETTI
========================= */
const canvas = document.getElementById('confetti')
const ctx = canvas.getContext('2d')

const emojis = ['‚ù§Ô∏è','üéÅ','üíñ','‚ú®']
let pieces=[]
let anim

function resize(){
  canvas.width = innerWidth
  canvas.height = innerHeight
}
resize()
window.onresize = resize

function startConfetti(){

  pieces=[]

  for(let i=0;i<120;i++){
    pieces.push({
      x: Math.random()*canvas.width,
      y: -20,
      size: 20 + Math.random()*20,
      speed: 2 + Math.random()*3,
      swing: Math.random()*2,
      angle: Math.random()*Math.PI,
      emoji: emojis[Math.floor(Math.random()*emojis.length)]
    })
  }

  const start = Date.now()

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height)

    pieces.forEach(p=>{
      p.y += p.speed
      p.x += Math.sin(p.angle+=0.05)*p.swing

      ctx.font = p.size+'px serif'
      ctx.fillText(p.emoji,p.x,p.y)
    })

    if(Date.now()-start < 3000){
      anim=requestAnimationFrame(draw)
    } else {
      cancelAnimationFrame(anim)
      ctx.clearRect(0,0,canvas.width,canvas.height)
    }
  }

  draw()
}

/* =========================
   MAIN FLOW
========================= */
btn.onclick = async () => {

  if (navigator.vibrate) navigator.vibrate(40)

  startScreen.style.display='none'

  vid.style.display='block'
  vid.volume = 1

  await vid.play()

  setTimeout(()=>{

    vid.volume = 0.15
    if (navigator.vibrate) navigator.vibrate([200,100,200])

    overlay.style.display='block'
    overlay.style.opacity='1'

    show(mathPopup)

    setTimeout(()=>{

      hide(mathPopup)
      show(midPopup)

      setTimeout(()=>{
        hide(midPopup)
        show(finalPopup)

        // üéâ —á–µ—Ä–µ–∑ 2—Å –¥–æ–∂–¥—å —Å–µ—Ä–¥–µ—á–µ–∫/–ø–æ–¥–∞—Ä–∫–æ–≤
        setTimeout(startConfetti,2000)

      },4000)

    },5000)

  },10000)
}
</script>

</body>
</html>
